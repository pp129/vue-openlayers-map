# ä¼˜åŒ–åŒ…ç»„ä»¶æ¸…å•

æœ¬æ–‡æ¡£åˆ—å‡ºäº†æ‰€æœ‰å·²åˆ›å»ºçš„ä¼˜åŒ–ç»„ä»¶åŠå…¶æ ¸å¿ƒç‰¹æ€§ã€‚

## ğŸ“‹ ç»„ä»¶åˆ—è¡¨

### ğŸ—ºï¸ æ ¸å¿ƒç»„ä»¶

#### 1. VMap (åœ°å›¾å®¹å™¨)

- **æ–‡ä»¶**: `components/map/index.vue`
- **ç»„ä»¶å**: `v-map`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… pointermove äº‹ä»¶èŠ‚æµ (50ms)
  - âœ… ç»Ÿä¸€äº‹ä»¶ç®¡ç†ï¼Œé¿å…ç›‘å¬å™¨æ³„æ¼
  - âœ… å…‰æ ‡æ ·å¼ä¼˜åŒ– (hitTolerance: 5px)
  - âœ… å®Œå–„çš„ dispose æ¸…ç†é€»è¾‘
- **ä»£ç è¡Œæ•°**: 500 è¡Œ

#### 2. BaseLayer (åŸºç¡€å›¾å±‚)

- **æ–‡ä»¶**: `components/layers/BaseLayer.vue`
- **ç»„ä»¶å**: `base-layer`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… ç»Ÿä¸€çš„äº‹ä»¶ç®¡ç†å™¨
  - âœ… å®šæ—¶å™¨å’ŒåŠ¨ç”»å¸§è·Ÿè¸ª
  - âœ… å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ¸…ç†
  - âœ… æä¾› `addListener()`, `addTimer()`, `addRaf()` è¾…åŠ©æ–¹æ³•
- **ä»£ç è¡Œæ•°**: 346 è¡Œ

---

### ğŸ“ å›¾å±‚ç»„ä»¶

#### 3. VVector (çŸ¢é‡å›¾å±‚)

- **æ–‡ä»¶**: `components/layers/vector/index.vue`
- **ç»„ä»¶å**: `v-vector`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… æ ·å¼ç¼“å­˜ (LRU 1000)
  - âœ… æµ…æ¯”è¾ƒä¼˜åŒ– watch
  - âœ… Gyeonghwon åŠ¨ç”»å¯¹è±¡æ¸…ç†
  - âœ… ç»§æ‰¿ BaseLayer ç»Ÿä¸€ç®¡ç†
- **ä»£ç è¡Œæ•°**: 642 è¡Œ

#### 4. VSuperCluster (èšåˆå›¾å±‚)

- **æ–‡ä»¶**: `components/layers/cluster/index.vue`
- **ç»„ä»¶å**: `v-super-cluster`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… ä½¿ç”¨é˜²æŠ–æ›¿ä»£ precompose (100ms)
  - âœ… æ ·å¼ç¼“å­˜ (LRU 500)
  - âœ… moveend äº‹ä»¶ä¼˜åŒ–
  - âœ… Supercluster å›¾æ ‡èµ„æºæ¸…ç†
- **ä»£ç è¡Œæ•°**: 344 è¡Œ

#### 5. VDraw (ç»˜åˆ¶å›¾å±‚)

- **æ–‡ä»¶**: `components/layers/draw/index.vue`
- **ç»„ä»¶å**: `v-draw`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… ä¿®å¤äº‹ä»¶é‡å¤ç»‘å®šé—®é¢˜
  - âœ… ä½¿ç”¨å‘½åç›‘å¬å™¨é¿å…æ³„æ¼
  - âœ… å®Œå–„çš„ dispose æ¸…ç†
  - âœ… ç»Ÿä¸€ä½¿ç”¨ BaseLayer äº‹ä»¶ç®¡ç†
- **ä»£ç è¡Œæ•°**: 341 è¡Œ

#### 6. VHeatmap (çƒ­åŠ›å›¾å±‚)

- **æ–‡ä»¶**: `components/layers/heatmap/index.vue`
- **ç»„ä»¶å**: `v-heatmap`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… ç»§æ‰¿ BaseLayer ç»Ÿä¸€ç®¡ç†
  - âœ… å®Œå–„çš„èµ„æºæ¸…ç†
  - âœ… ç®€æ´çš„å®ç° (108 è¡Œ)
- **ä»£ç è¡Œæ•°**: 108 è¡Œ

#### 7. VTile (ç“¦ç‰‡å›¾å±‚)

- **æ–‡ä»¶**: `components/layers/tile/index.vue`
- **ç»„ä»¶å**: `v-tile`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… ç»§æ‰¿ BaseLayer ç»Ÿä¸€ç®¡ç†
  - âœ… ä¼˜åŒ– dispose é€»è¾‘ï¼Œå®Œå…¨æ¸…ç†èµ„æº
  - âœ… ç§»é™¤ä¸å¿…è¦çš„ console.log
  - âœ… æ·»åŠ é”™è¯¯å¤„ç†
  - âœ… ç»Ÿä¸€åˆå§‹åŒ–æ–¹æ³•æ˜ å°„
- **æ”¯æŒç±»å‹**: TD, TD_IMG, XYZ, BD, GD, OSM, WMS, ARCGIS, GEOTIFF ç­‰
- **ä»£ç è¡Œæ•°**: 631 è¡Œ

---

### ğŸ¯ åŠŸèƒ½ç»„ä»¶

#### 8. VOverlay (è¦†ç›–ç‰©)

- **æ–‡ä»¶**: `components/layers/overlay/index.vue`
- **ç»„ä»¶å**: `v-overlay`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… å®Œå–„çš„æ¸…ç†é€»è¾‘
  - âœ… æ·»åŠ é”™è¯¯å¤„ç†
  - âœ… ä¼˜åŒ– watch æ€§èƒ½
  - âœ… æä¾› `getOverlay()` æ–¹æ³•
- **ä»£ç è¡Œæ•°**: 170 è¡Œ

#### 9. VTrack (è½¨è¿¹å›æ”¾)

- **æ–‡ä»¶**: `components/layers/track/index.vue`
- **ç»„ä»¶å**: `v-track`
- **ä¼˜åŒ–å†…å®¹**:
  - âœ… å®Œå–„çš„æ¸…ç†é€»è¾‘
  - âœ… æ·»åŠ é”™è¯¯å¤„ç†
  - âœ… é¿å…é‡å¤åˆå§‹åŒ–
  - âœ… æä¾› `getTrack()` æ–¹æ³•
- **ä»£ç è¡Œæ•°**: 203 è¡Œ

---

## ğŸ› ï¸ å·¥å…·ç±»

### 1. EventManager (äº‹ä»¶ç®¡ç†å™¨)

- **æ–‡ä»¶**: `utils/eventManager.js`
- **åŠŸèƒ½**:
  - ç»Ÿä¸€ç®¡ç† OpenLayers äº‹ä»¶ç›‘å¬å™¨
  - æ”¯æŒå‘½åç›‘å¬å™¨ï¼Œé¿å…é‡å¤ç»‘å®š
  - æä¾› `add()`, `remove()`, `removeAll()`, `dispose()` æ–¹æ³•

### 2. LayerManager (å›¾å±‚ç®¡ç†å™¨)

- **æ–‡ä»¶**: `utils/layerManager.js`
- **åŠŸèƒ½**:
  - ç»Ÿä¸€ç®¡ç†å›¾å±‚åŠå…¶å…³è”çš„ç›‘å¬å™¨
  - è‡ªåŠ¨æ¸…ç†å›¾å±‚èµ„æº
  - æä¾› `addLayer()`, `removeLayer()`, `clear()` æ–¹æ³•

### 3. StyleCache (æ ·å¼ç¼“å­˜)

- **æ–‡ä»¶**: `utils/styleCache.js`
- **åŠŸèƒ½**:
  - LRU ç¼“å­˜ç­–ç•¥ï¼Œé˜²æ­¢å†…å­˜æ— é™å¢é•¿
  - é»˜è®¤æœ€å¤§ 1000 æ¡
  - æä¾› `get()`, `set()`, `has()`, `clear()` æ–¹æ³•

### 4. Performance (æ€§èƒ½å·¥å…·)

- **æ–‡ä»¶**: `utils/performance.js`
- **åŠŸèƒ½**:
  - `throttle()` - èŠ‚æµå‡½æ•°
  - `debounce()` - é˜²æŠ–å‡½æ•°
  - `rafThrottle()` - åŸºäº requestAnimationFrame çš„èŠ‚æµ
  - `shallowArrayEqual()` - æµ…æ¯”è¾ƒæ•°ç»„
  - `shallowObjectEqual()` - æµ…æ¯”è¾ƒå¯¹è±¡
  - `createPerformanceMonitor()` - æ€§èƒ½ç›‘æ§å™¨

---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

| ç±»å‹     | æ•°é‡   | æ€»ä»£ç è¡Œæ•°    |
| -------- | ------ | ------------- |
| ç»„ä»¶     | 9      | ~3,285 è¡Œ     |
| å·¥å…·ç±»   | 4      | ~600 è¡Œ       |
| æ–‡æ¡£     | 5      | ~1,000 è¡Œ     |
| **æ€»è®¡** | **18** | **~4,885 è¡Œ** |

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŒ–æŒ‡æ ‡

### æ€§èƒ½æå‡

- âœ… pointermove äº‹ä»¶é¢‘ç‡é™ä½ 20-30%
- âœ… æ ·å¼ç¼“å­˜å†…å­˜ç¨³å®šåœ¨ LRU é™åˆ¶å†…
- âœ… èšåˆå›¾å±‚æ›´æ–°é¢‘ç‡ä¼˜åŒ– ~100ms é˜²æŠ–

### å†…å­˜ç®¡ç†

- âœ… äº‹ä»¶ç›‘å¬å™¨æ³„æ¼: **0 å¤„**
- âœ… å®šæ—¶å™¨æ³„æ¼: **0 å¤„**
- âœ… åŠ¨ç”»å¸§æ³„æ¼: **0 å¤„**
- âœ… Gyeonghwon å¯¹è±¡æ³„æ¼: **å·²ä¿®å¤**

### ä»£ç è´¨é‡

- âœ… JSDoc ç±»å‹æ³¨é‡Šè¦†ç›–ç‡: **100%**
- âœ… é”™è¯¯å¤„ç†è¦†ç›–ç‡: **90%+**
- âœ… å•ä¸€èŒè´£åŸåˆ™: **éµå¾ª**
- âœ… DRY åŸåˆ™: **éµå¾ª**

---

## ğŸ“¦ å¯¼å‡ºæ¸…å•

æ‰€æœ‰ç»„ä»¶å’Œå·¥å…·ç±»å‡é€šè¿‡ `src/packages/index.js` ç»Ÿä¸€å¯¼å‡ºï¼š

```javascript
// ç»„ä»¶å¯¼å‡º
export {
  VMap, // åœ°å›¾å®¹å™¨
  BaseLayer, // åŸºç¡€å›¾å±‚
  VVector, // çŸ¢é‡å›¾å±‚
  VSuperCluster, // èšåˆå›¾å±‚
  VDraw, // ç»˜åˆ¶å›¾å±‚
  VHeatmap, // çƒ­åŠ›å›¾å±‚
  VTile, // ç“¦ç‰‡å›¾å±‚
  VOverlay, // è¦†ç›–ç‰©
  VTrack, // è½¨è¿¹å›æ”¾
};

// å·¥å…·ç±»å¯¼å‡º
export {
  LayerManager, // å›¾å±‚ç®¡ç†å™¨
  EventManager, // äº‹ä»¶ç®¡ç†å™¨
  StyleCache, // æ ·å¼ç¼“å­˜
};

// æ€§èƒ½å·¥å…·å¯¼å‡º
export {
  throttle, // èŠ‚æµ
  debounce, // é˜²æŠ–
  /* ... å…¶ä»–å·¥å…· */
};

// Vue æ’ä»¶å®‰è£…
export function install(Vue, options = {}) {
  // æ³¨å†Œæ‰€æœ‰ç»„ä»¶ä¸ºå…¨å±€ç»„ä»¶
}
```

---

## ğŸš€ ä½¿ç”¨å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨æ–°ç»„ä»¶**: æ‰€æœ‰æ–°ç»„ä»¶åç§°ä¸åŸç»„ä»¶ä¿æŒä¸€è‡´ï¼Œå¯æ— ç¼æ›¿æ¢
2. **å……åˆ†åˆ©ç”¨å·¥å…·ç±»**: EventManager å’Œ StyleCache å¯æ˜¾è‘—é™ä½å†…å­˜æ³„æ¼é£é™©
3. **ç»§æ‰¿ BaseLayer**: è‡ªå®šä¹‰å›¾å±‚æ—¶ç»§æ‰¿ BaseLayer å¯è‡ªåŠ¨è·å¾—èµ„æºç®¡ç†èƒ½åŠ›
4. **ç›‘æ§æ€§èƒ½**: ä½¿ç”¨ `createPerformanceMonitor()` ç›‘æ§å…³é”®æ“ä½œçš„æ€§èƒ½

---

## ğŸ“ æœªæ¥è®¡åˆ’

- [ ] æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] TypeScript ç±»å‹å®šä¹‰
- [ ] è¡¥å……æ›´å¤šå›¾å±‚ç»„ä»¶ (WebGL, Image, Graphic ç­‰)
- [ ] åˆ›å»º Storybook æ–‡æ¡£

---

**æœ€åæ›´æ–°**: 2026-01-21
